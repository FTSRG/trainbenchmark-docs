%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% This document can be formatted only with pdflatex.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pdfminorversion=7
\documentclass[12pt,twoside,a4paper]{report}
\usepackage[hyphens]{url}
\usepackage{hyperref}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{ae}
\usepackage[pdftex]{graphicx}

\usepackage{../Latex/mondo}


\usepackage[english]{babel}
\usepackage{latexsym,epsf,epsfig}
\usepackage{rotating,amsmath,amsfonts,amssymb}

\usepackage{times}

\usepackage{listings}
\usepackage{longtable}
\usepackage{datetime}
\usepackage{xcolor}
\usepackage{tabularx}
\usepackage{tikz}
\usetikzlibrary{positioning}
\usetikzlibrary{arrows}
\usetikzlibrary{shapes.geometric}
\usepackage{amsfonts}
\usepackage{xcolor,colortbl}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{pifont}
%\usepackage{adjustbox}
\usepackage{tabu}
\usepackage{multirow}
\usepackage{mathastext}
\usepackage{float}
\usepackage{pgffor}

\newlength{\hsbw}
\newcommand{\comment}[1]{\mbox{}\par\vspace{0.25in}%
\setlength{\hsbw}{\linewidth}%
\addtolength{\hsbw}{-2\fboxsep}%
\addtolength{\hsbw}{-2\fboxrule}%
\noindent\fbox{\parbox{\hsbw}{{\bf Comment: }#1}}\vspace{0.25in}}
% comment-out next line to see Comments
%\renewcommand{\comment}[1]{}

% Common abbrev. are set as commands to ensure proper spacing after the dot
\newcommand{\ie}{i.e.\ \@\xspace}
\newcommand{\Ie}{i.e.\ \@\xspace}
\newcommand{\eg}{e.g.\@\xspace}
\newcommand{\Eg}{E.g.\@\xspace}
\newcommand{\etal}{et al.\@\xspace}
\newcommand{\etc}{etc.\@\xspace}

\sloppy

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Change title and other document information here.                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\didentifier}{Technical Report}
\newcommand{\dnumber}{Technical Report}
\newcommand{\dtitle}{Train Benchmark}
\newcommand{\dversion}{0.9}
\newcommand{\dauthors}{BME}

% \dstatus should be Draft or Final %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\dstatus}{Draft}

% \ddist should be Partners Only, EC or Public %%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\ddist}{Public}

\newdateformat{eudate}{\THEDAY~\monthname[\THEMONTH]~\THEYEAR}
\newcommand{\ddate}{\eudate \today}
%Use a fixed date as below for final version
%\newcommand{\ddate}{24 February 2014}
\newcommand{\dyear}{2014\xspace}

%% local changes start %%

\usepackage{booktabs}
\usepackage{dcolumn}

\usepackage{amsthm}

\newcommand{\cc}[1]{\multicolumn{1}{c}{#1}}
\newcolumntype{d}[1]{D{.}{.}{#1}}
\newcommand{\code}[1]{{\texttt{#1}}}
\newcommand{\codefoot}[1]{{\texttt{#1}}}
\newcommand{\abs}[1]{|{#1}|}

% this command reduces the size of the sans-serif font so it is in level with the serif font
\renewcommand{\textsf}[1]{{\sffamily \small #1}}

\usepackage{listings}
\lstset{language=Java,basicstyle=\footnotesize,captionpos=b}

\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
\definecolor{gray20}{gray}{.20}

\lstdefinestyle{shell}{
  tabsize=2,
  language=,
  xleftmargin=.5cm,
  framexleftmargin=.4cm,
  keywordstyle=\color{gray20},
  breaklines=true,
  captionpos=t,
  basicstyle=\ttfamily\small,
  showstringspaces=false,
  numberstyle=\ttfamily\tiny,
  numbersep=1.1cm,
  numbers=left,
  numbersep=5pt,
  frameround=ftff,
  showspaces=false,
  showtabs=false,
  frame=single,
  backgroundcolor=\color{gray97},
  rulesepcolor=\color{black},
  commentstyle=\color{gray45}
}

\include{command-definitions}
\include{main-listings}

\lstnewenvironment{Java} {\lstset{
  basicstyle=\fontsize{8}{10}\ttfamily,xleftmargin=12pt,
  language=Java,
  columns=flexible, % add any modifications here
}}{}

\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}
\newtheorem{criterion}{Criterion}
\newtheorem{definition}{Definition}

%% local changes end %%

\usepackage{multicol}
\usepackage{bytefield}
%\usepackage{colortbl}
\usepackage{textcomp}

\newcommand{\XOR}{\textasciicircum\xspace}
\newcommand{\OR}{\textbar\xspace}
\newcommand{\AND}{\&\xspace}
\newcommand{\NOT}{\texttildelow}
\newcommand{\shl}{\textless$\!$\textless\xspace}
\newcommand{\shr}{\textgreater$\!$\textgreater$\!$\textgreater\xspace}
\newcommand{\ashr}{\textgreater$\!$\textgreater\xspace}

\renewcommand{\figureautorefname}{Figure}
\renewcommand{\tableautorefname}{Table}
\renewcommand{\partautorefname}{Part}
\renewcommand{\chapterautorefname}{Chapter}
\renewcommand{\sectionautorefname}{Section}
\renewcommand{\subsectionautorefname}{Section}
\renewcommand{\subsubsectionautorefname}{Section}

\newcommand{\todo}[1]{\textbf{TODO:  }{#1}}
\newcommand{\concept}[1]{\emph{#1}\index{#1}\label{def:#1}}
\newcommand{\eiq}{\textsc{EMF-IncQuery}}
\newcommand{\iqd}{\textsc{IncQuery-D}}
\let\codeCap\texttt

\newcommand{\benchmarkresult}[2]{
\begin{figure}[H]
	\centering
	\includegraphics[width=\textwidth]{figures/benchmark-results/#1}
	\caption{#2}
	\label{fig:#1}
\end{figure}}

\newcommand{\forallqueries}[1]{\foreach \n in {PosLength,RouteSensor,SignalNeighbor,SwitchSensor}{#1}}

\begin{document}

\firstpage

\partnerpage


\newpage
\tableofcontents

\newpage
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\section*{Document Control}

\begin{tabular}{*{3}{|p{.3\textwidth}}|}\hline
\centering{\bf Version} &
\centering{\bf Status} &
\centering{\bf Date}\tabularnewline\hline
\centering{0.1} & \centering{Document outline} & \centering{30 November 2013} \tabularnewline\hline
\centering{0.2} & \centering{First draft - structure ready} & \centering{17 January 2014} \tabularnewline\hline
\centering{0.3} & \centering{Second draft - incorporation of ASE material} & \centering{06 March 2014} \tabularnewline\hline
\centering{0.5} & \centering{Third draft - revised contents} & \centering{10 March 2014} \tabularnewline\hline
\centering{0.8} & \centering{Fourth draft - results complete, analysis needs rework} & \centering{10 April 2014} \tabularnewline\hline
\centering{0.9} & \centering{Fifth draft - complete} & \centering{1 June 2014} \tabularnewline\hline
\end{tabular}

\clearpage
\pagenumbering{arabic}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter*{Executive Summary}
The main goal of the Train Benchmark is to measure the \emph{execution time} of graph-based query processing tools with particular emphasis on incremental query reevaluation. The execution time is measured against models of growing sizes generated by an instance model generator. This way, the scalability of the tools is evaluated. The Train Benchmark also demonstrates other abilities of the tools, including transformation capabilities, conciseness of the query and transformation language, convenience of the API, compatibility with different metamodeling languages and so on. The Train Benchmark is a general benchmarking framework, that contains a specific benchmark test case set built around a metamodel inspired by railway system design. This test case set also comes with a set of queries and transformation operations. 

The current tech report includes information on two variants of the Train Benchmark: the original version was described in~\cite{SCP2014} and describes the incremental well-formedness checking scenario. The extended version was described in~\cite{ASE2013} and introduces query and instance model query metrics to quantitatively assess the ``difficulty'' of various model query-instance model combinations to find those metrics that are best for predicting the query evaluation time without running the query itself.

The most up-to-date supplementary material is found at \url{https://github.com/FTSRG/trainbenchmark-docs}

\input{tboverview}
\input{specification}
\input{specification-met}
\input{implementation}
\input{implementation-met}
\input{results}
\input{results-analysis}
\input{results-met}
\input{summary}
\input{appendix}

\clearpage

\bibliographystyle{plain}
\bibliography{../bib/trainbenchmark}

\end{document}
